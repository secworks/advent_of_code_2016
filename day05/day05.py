#!/usr/bin/env python3
#=======================================================================
#
# day05.py
# --------
# Solutions to Advent of Code 2016, day 05.
#
#=======================================================================

import hashlib


#-------------------------------------------------------------------
#-------------------------------------------------------------------
def find_next_fivezeros(s, n):
    done = False
    while not done:
        m = (s + str(n))
        d = hashlib.md5(m.encode()).hexdigest()
        if d[0 : 5] == '00000':
            done = True
        else:
            n += 1
    return d, n


#-------------------------------------------------------------------
#-------------------------------------------------------------------
def get_problem1_password(door_id):
    pwd = ''
    c = 0
    while len(pwd) < 8:
        (d, c) = find_next_fivezeros(door_id, c)
#        print("Adding char", d[5])
        pwd += d[5]
        c += 1
    return pwd


#-------------------------------------------------------------------
#-------------------------------------------------------------------
def get_problem2_password(door_id):
    pwd = ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x']

    c = 0
    while 'x' in pwd:
        (d, c) = find_next_fivezeros(door_id, c)
        if (d[5] in ['0', '1', '2', '3', '4', '5', '6', '7']) \
           and (pwd[int(d[5])] == 'x'):
#            print("Setting char", int(d[5]), "to", d[6])
            pwd[int(d[5])] = d[6]
        c += 1
    return pwd


#-------------------------------------------------------------------
#-------------------------------------------------------------------
def problem1():
    print("Problem 1")
    print("---------")

    pwd = get_problem1_password('abbhdwsy')
    print("password:", pwd)
    print("")


#-------------------------------------------------------------------
#-------------------------------------------------------------------
def problem2():
    print("Problem 2")
    print("---------")

    pwd = get_problem2_password('abbhdwsy')
    print("password:", ''.join(pwd))
    print("")


#-------------------------------------------------------------------
#-------------------------------------------------------------------
print("Advent of Code 2016, day 05")
print("===========================")
problem1()
problem2()

#=======================================================================
#=======================================================================
